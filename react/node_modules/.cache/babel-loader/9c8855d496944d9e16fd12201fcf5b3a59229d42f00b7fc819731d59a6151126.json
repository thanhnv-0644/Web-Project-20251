{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{useCart}from\"../context/CartContext\";import ApiService from\"../../service/ApiService\";import'../../style/productDetailsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetailsPage=()=>{const{productId}=useParams();const{cart,dispatch}=useCart();const[product,setProduct]=useState(null);useEffect(()=>{fetchProduct();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[productId]);const fetchProduct=async()=>{try{const response=await ApiService.getProductById(productId);setProduct(response.product);}catch(error){console.log(error.message||error);}};const addToCart=()=>{if(product){dispatch({type:'ADD_ITEM',payload:product});}};const incrementItem=()=>{if(product){dispatch({type:'INCREMENT_ITEM',payload:product});}};const decrementItem=()=>{if(product){const cartItem=cart.find(item=>item.id===product.id);if(cartItem&&cartItem.quantity>1){dispatch({type:'DECREMENT_ITEM',payload:product});}else{dispatch({type:'REMOVE_ITEM',payload:product});}}};if(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0110ang t\\u1EA3i th\\xF4ng tin s\\u1EA3n ph\\u1EA9m...\"})});}const cartItem=cart.find(item=>item.id===product.id);return/*#__PURE__*/_jsx(\"div\",{className:\"product-detail-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-detail\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image-section\",children:/*#__PURE__*/_jsx(\"img\",{src:product===null||product===void 0?void 0:product.imageUrl,alt:product===null||product===void 0?void 0:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product===null||product===void 0?void 0:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-label\",children:\"Gi\\xE1:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[\"$\",product.price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"M\\xF4 t\\u1EA3 s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"p\",{children:product===null||product===void 0?void 0:product.description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-actions\",children:cartItem?/*#__PURE__*/_jsxs(\"div\",{className:\"cart-controls\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"controls-label\",children:\"S\\u1ED1 l\\u01B0\\u1EE3ng trong gi\\u1ECF:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decrementItem,children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:cartItem.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:incrementItem,children:\"+\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart-btn\",onClick:addToCart,children:\"Th\\xEAm V\\xE0o Gi\\u1ECF H\\xE0ng\"})})]})]})});};export default ProductDetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useCart","ApiService","jsx","_jsx","jsxs","_jsxs","ProductDetailsPage","productId","cart","dispatch","product","setProduct","fetchProduct","response","getProductById","error","console","log","message","addToCart","type","payload","incrementItem","decrementItem","cartItem","find","item","id","quantity","className","children","src","imageUrl","alt","name","price","toFixed","description","onClick"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/pages/ProductDetailsPage.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport ApiService from \"../../service/ApiService\";\r\nimport '../../style/productDetailsPage.css';\r\n\r\n\r\nconst ProductDetailsPage = () => {\r\n\r\n    const {productId} = useParams();\r\n    const {cart, dispatch} = useCart();\r\n    const [product, setProduct] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        fetchProduct();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [productId])\r\n\r\n    const fetchProduct = async () => {\r\n        try {\r\n            const response = await ApiService.getProductById(productId);\r\n            setProduct(response.product);\r\n            \r\n        } catch (error) {\r\n            console.log(error.message || error)\r\n        }\r\n    }\r\n\r\n    \r\n    const addToCart = () => {\r\n        if (product) {\r\n            dispatch({type: 'ADD_ITEM', payload: product});   \r\n        }\r\n    }\r\n\r\n    const incrementItem = () => {\r\n        if(product){\r\n            dispatch({type: 'INCREMENT_ITEM', payload: product});\r\n \r\n        }\r\n    }\r\n\r\n    const decrementItem = () => {\r\n        if (product) {\r\n            const cartItem = cart.find(item => item.id === product.id);\r\n            if (cartItem && cartItem.quantity > 1) {\r\n                dispatch({type: 'DECREMENT_ITEM', payload: product}); \r\n            }else{\r\n                dispatch({type: 'REMOVE_ITEM', payload: product}); \r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    if (!product) {\r\n        return (\r\n            <div className=\"loading-container\">\r\n                <p>Đang tải thông tin sản phẩm...</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const cartItem = cart.find(item => item.id === product.id);\r\n\r\n    return(\r\n        <div className=\"product-detail-page\">\r\n            <div className=\"product-detail\">\r\n                <div className=\"product-image-section\">\r\n                    <img src={product?.imageUrl} alt={product?.name} />\r\n                </div>\r\n                \r\n                <div className=\"product-info-section\">\r\n                    <h1>{product?.name}</h1>\r\n                    \r\n                    <div className=\"product-price\">\r\n                        <span className=\"price-label\">Giá:</span>\r\n                        <span className=\"price-value\">${product.price.toFixed(2)}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"product-description\">\r\n                        <h3>Mô tả sản phẩm</h3>\r\n                        <p>{product?.description}</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"product-actions\">\r\n                        {cartItem ? (\r\n                            <div className=\"cart-controls\">\r\n                                <span className=\"controls-label\">Số lượng trong giỏ:</span>\r\n                                <div className=\"quantity-controls\">\r\n                                    <button onClick={decrementItem}>-</button>\r\n                                    <span>{cartItem.quantity}</span>\r\n                                    <button onClick={incrementItem}>+</button>\r\n                                </div>\r\n                            </div>\r\n                        ):(\r\n                            <button className=\"add-to-cart-btn\" onClick={addToCart}>\r\n                                Thêm Vào Giỏ Hàng\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ProductDetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}