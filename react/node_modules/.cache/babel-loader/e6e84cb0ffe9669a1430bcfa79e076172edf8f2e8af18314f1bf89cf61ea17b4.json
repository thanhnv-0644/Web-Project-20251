{"ast":null,"code":"import React,{useState}from'react';import'../../style/navbar.css';import{NavLink,useNavigate,useLocation}from'react-router-dom';import ApiService from'../../service/ApiService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=()=>{const[searchValue,setSearchValue]=useState('');const navigate=useNavigate();const location=useLocation();const isAdmin=ApiService.isAdmin();const isAuthenticated=ApiService.isAuthenticated();const isAdminRoute=location.pathname.startsWith('/admin');const isProfileRoute=location.pathname.startsWith('/profile')||location.pathname.startsWith('/add-address')||location.pathname.startsWith('/edit-address');const handleSearchChange=e=>{setSearchValue(e.target.value);};const handleSearchSubmit=async e=>{e.preventDefault();navigate(\"/?search=\".concat(searchValue));};const handleLogout=()=>{const confirm=window.confirm('Bạn có chắc chắn muốn đăng xuất?');if(confirm){ApiService.logout();setTimeout(()=>{navigate('/login');},500);}};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-brand\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/phegon_mart.png\",alt:\"Phegon Mart\"})})}),!(isAdminRoute||isProfileRoute&&isAdmin)&&/*#__PURE__*/_jsxs(\"form\",{className:\"navbar-search\",onSubmit:handleSearchSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xECm ki\\u1EBFm s\\u1EA3n ph\\u1EA9m\",value:searchValue,onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"T\\xECm ki\\u1EBFm\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar-link\",children:(isAdminRoute||isProfileRoute)&&isAdmin?/*#__PURE__*/ // Links gọn cho Admin khi ở trang admin hoặc profile\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/profile\",children:\"My Account\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(NavLink,{onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/ // Links đầy đủ cho user thường\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",children:\"Home\"}),isAuthenticated&&/*#__PURE__*/_jsx(NavLink,{to:\"/profile\",children:\"My Account\"}),isAdmin&&/*#__PURE__*/_jsx(NavLink,{to:\"/admin\",children:\"Admin\"}),!isAuthenticated&&/*#__PURE__*/_jsx(NavLink,{to:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/cart\",children:\"Cart\"}),isAuthenticated&&/*#__PURE__*/_jsx(NavLink,{onClick:handleLogout,children:\"Logout\"})]})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","NavLink","useNavigate","useLocation","ApiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","searchValue","setSearchValue","navigate","location","isAdmin","isAuthenticated","isAdminRoute","pathname","startsWith","isProfileRoute","handleSearchChange","e","target","value","handleSearchSubmit","preventDefault","concat","handleLogout","confirm","window","logout","setTimeout","className","children","to","src","alt","onSubmit","type","placeholder","onChange","onClick"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/common/Navbar.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../../style/navbar.css';\r\nimport { NavLink, useNavigate, useLocation } from 'react-router-dom';\r\nimport ApiService from '../../service/ApiService';\r\n\r\nconst Navbar = () => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const isAdmin = ApiService.isAdmin();\r\n  const isAuthenticated = ApiService.isAuthenticated();\r\n  const isAdminRoute = location.pathname.startsWith('/admin');\r\n  const isProfileRoute = location.pathname.startsWith('/profile') || \r\n                         location.pathname.startsWith('/add-address') || \r\n                         location.pathname.startsWith('/edit-address');\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n  };\r\n\r\n  const handleSearchSubmit = async (e) => {\r\n    e.preventDefault();\r\n    navigate(`/?search=${searchValue}`);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    const confirm = window.confirm('Bạn có chắc chắn muốn đăng xuất?');\r\n    if (confirm) {\r\n      ApiService.logout();\r\n      setTimeout(() => {\r\n        navigate('/login');\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-brand\">\r\n        <NavLink to=\"/\">\r\n          <img src=\"/phegon_mart.png\" alt=\"Phegon Mart\" />\r\n        </NavLink>\r\n      </div>\r\n      \r\n      {/* SEARCH FORM - Chỉ hiện khi không phải trang admin hoặc profile của admin */}\r\n      {!(isAdminRoute || (isProfileRoute && isAdmin)) && (\r\n        <form className=\"navbar-search\" onSubmit={handleSearchSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm sản phẩm\"\r\n            value={searchValue}\r\n            onChange={handleSearchChange}\r\n          />\r\n          <button type=\"submit\">Tìm kiếm</button>\r\n        </form>\r\n      )}\r\n\r\n      <div className=\"navbar-link\">\r\n        {(isAdminRoute || isProfileRoute) && isAdmin ? (\r\n          // Links gọn cho Admin khi ở trang admin hoặc profile\r\n          <>\r\n            <NavLink to=\"/profile\">My Account</NavLink>\r\n            <NavLink to=\"/admin\">Admin</NavLink>\r\n            <NavLink onClick={handleLogout}>Logout</NavLink>\r\n          </>\r\n        ) : (\r\n          // Links đầy đủ cho user thường\r\n          <>\r\n            <NavLink to=\"/\">Home</NavLink>\r\n            {isAuthenticated && <NavLink to=\"/profile\">My Account</NavLink>}\r\n            {isAdmin && <NavLink to=\"/admin\">Admin</NavLink>}\r\n            {!isAuthenticated && <NavLink to=\"/login\">Login</NavLink>}\r\n            <NavLink to=\"/cart\">Cart</NavLink>\r\n            {isAuthenticated && <NavLink onClick={handleLogout}>Logout</NavLink>}\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}