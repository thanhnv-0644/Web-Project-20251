{"ast":null,"code":"import _objectSpread from\"D:/2025.1/CNW/Web-Project-20251/react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import ApiService from\"../../service/ApiService\";import'../../style/address.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddressPage=()=>{const[address,setAddress]=useState({street:'',city:'',state:'',zipCode:'',country:''});const[error,setError]=useState(null);const navigate=useNavigate();const location=useLocation();useEffect(()=>{if(location.pathname==='/edit-address'){fetchUserInfo();}},[location.pathname]);const fetchUserInfo=async()=>{try{const response=await ApiService.getLoggedInUserInfo();if(response.user.address){setAddress(response.user.address);}}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||\"unable to fetch user information\");}};const handleChange=e=>{const{name,value}=e.target;setAddress(prevAddress=>_objectSpread(_objectSpread({},prevAddress),{},{[name]:value}));};const handSubmit=async e=>{e.preventDefault();try{await ApiService.saveAddress(address);navigate(\"/profile\");}catch(error){var _error$response2,_error$response2$data;setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||\"Failed to save/update address\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"address-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"address-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"address-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:location.pathname==='/edit-address'?'Chỉnh Sửa Địa Chỉ':\"Thêm Địa Chỉ Mới\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vui l\\xF2ng nh\\u1EADp th\\xF4ng tin \\u0111\\u1ECBa ch\\u1EC9 giao h\\xE0ng c\\u1EE7a b\\u1EA1n\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0110\\u1ECBa ch\\u1EC9 \\u0111\\u01B0\\u1EDDng\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"street\",placeholder:\"S\\u1ED1 nh\\xE0, t\\xEAn \\u0111\\u01B0\\u1EDDng\",value:address.street,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Th\\xE0nh ph\\u1ED1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"H\\xE0 N\\u1ED9i, TP.HCM, ...\",value:address.city,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\u1EC9nh/Bang\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"state\",placeholder:\"T\\u1EC9nh/Bang\",value:address.state,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\xE3 b\\u01B0u \\u0111i\\u1EC7n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"zipCode\",placeholder:\"100000\",value:address.zipCode,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Qu\\u1ED1c gia\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"country\",placeholder:\"Vi\\u1EC7t Nam\",value:address.country,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:location.pathname==='/edit-address'?'Cập Nhật Địa Chỉ':\"Lưu Địa Chỉ\"})]})]})});};export default AddressPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","ApiService","jsx","_jsx","jsxs","_jsxs","AddressPage","address","setAddress","street","city","state","zipCode","country","error","setError","navigate","location","pathname","fetchUserInfo","response","getLoggedInUserInfo","user","_error$response","_error$response$data","data","message","handleChange","e","name","value","target","prevAddress","_objectSpread","handSubmit","preventDefault","saveAddress","_error$response2","_error$response2$data","className","children","onSubmit","type","placeholder","onChange","required"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/pages/AddressPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport ApiService from \"../../service/ApiService\";\r\nimport '../../style/address.css';\r\n\r\nconst AddressPage = () => {\r\n\r\n    const [address, setAddress] = useState({\r\n        street: '',\r\n        city: '',\r\n        state: '',\r\n        zipCode: '',\r\n        country: ''\r\n    });\r\n\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (location.pathname === '/edit-address') {\r\n            fetchUserInfo();\r\n        }\r\n    }, [location.pathname]);\r\n\r\n\r\n    const fetchUserInfo = async()=>{\r\n        try {\r\n            const response = await ApiService.getLoggedInUserInfo();\r\n            if (response.user.address) {\r\n                setAddress(response.user.address)\r\n            }\r\n        } catch (error) {\r\n            setError(error.response?.data?.message || error.message || \"unable to fetch user information\")\r\n        }\r\n    } ;\r\n\r\n    const handleChange = (e) =>{\r\n        const {name, value} = e.target;\r\n        setAddress((prevAddress) => ({\r\n            ...prevAddress,\r\n            [name]: value\r\n        }))\r\n    }\r\n\r\n    const handSubmit = async (e) =>{\r\n        e.preventDefault();\r\n        try {\r\n            await ApiService.saveAddress(address);\r\n            navigate(\"/profile\")\r\n        } catch (error) {\r\n            setError(error.response?.data?.message || error.message || \"Failed to save/update address\")\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        <div className=\"address-page\">\r\n            <div className=\"address-container\">\r\n                <div className=\"address-header\">\r\n                    <h2>{location.pathname === '/edit-address' ? 'Chỉnh Sửa Địa Chỉ' : \"Thêm Địa Chỉ Mới\"}</h2>\r\n                    <p>Vui lòng nhập thông tin địa chỉ giao hàng của bạn</p>\r\n                </div>\r\n                \r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                \r\n                <form onSubmit={handSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Địa chỉ đường</label>\r\n                        <input \r\n                            type=\"text\"\r\n                            name=\"street\"\r\n                            placeholder=\"Số nhà, tên đường\"\r\n                            value={address.street}\r\n                            onChange={handleChange}\r\n                            required/>\r\n                    </div>\r\n                    \r\n                    <div className=\"form-row\">\r\n                        <div className=\"form-group\">\r\n                            <label>Thành phố</label>\r\n                            <input \r\n                                type=\"text\"\r\n                                name=\"city\"\r\n                                placeholder=\"Hà Nội, TP.HCM, ...\"\r\n                                value={address.city}\r\n                                onChange={handleChange}\r\n                                required/>\r\n                        </div>\r\n                        \r\n                        <div className=\"form-group\">\r\n                            <label>Tỉnh/Bang</label>\r\n                            <input \r\n                                type=\"text\"\r\n                                name=\"state\"\r\n                                placeholder=\"Tỉnh/Bang\"\r\n                                value={address.state}\r\n                                onChange={handleChange}\r\n                                required/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-row\">\r\n                        <div className=\"form-group\">\r\n                            <label>Mã bưu điện</label>\r\n                            <input \r\n                                type=\"text\"\r\n                                name=\"zipCode\"\r\n                                placeholder=\"100000\"\r\n                                value={address.zipCode}\r\n                                onChange={handleChange}\r\n                                required/>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label>Quốc gia</label>\r\n                            <input \r\n                                type=\"text\"\r\n                                name=\"country\"\r\n                                placeholder=\"Việt Nam\"\r\n                                value={address.country}\r\n                                onChange={handleChange}\r\n                                required/>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <button type=\"submit\" className=\"submit-button\">\r\n                        {location.pathname === '/edit-address' ? 'Cập Nhật Địa Chỉ' : \"Lưu Địa Chỉ\"}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddressPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}