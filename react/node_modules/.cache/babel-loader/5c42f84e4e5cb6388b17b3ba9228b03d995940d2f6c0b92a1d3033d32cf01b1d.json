{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import'../../style/addProduct.css';import ApiService from\"../../service/ApiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditProductPage=()=>{const{productId}=useParams();const[image,setImage]=useState(null);const[categories,setCategories]=useState([]);const[categoryId,setCategoryId]=useState('');const[name,setName]=useState('');const[description,setDescription]=useState('');const[message,setMessage]=useState('');const[price,setPrice]=useState('');const[imageUrl,setImageUrl]=useState(null);const navigate=useNavigate();useEffect(()=>{ApiService.getAllCategory().then(res=>setCategories(res.categoryList));if(productId){ApiService.getProductById(productId).then(response=>{setName(response.product.name);setDescription(response.product.description);setPrice(response.product.price);setCategoryId(response.product.categoryId);setImageUrl(response.product.imageUrl);});}},[productId]);const handleImageChange=e=>{setImage(e.target.files[0]);setImageUrl(URL.createObjectURL(e.target.files[0]));};const handleSubmit=async e=>{e.preventDefault();try{const formData=new FormData();if(image){formData.append('image',image);}formData.append('productId',productId);formData.append('categoryId',categoryId);formData.append('name',name);formData.append('description',description);formData.append('price',price);const response=await ApiService.updateProduct(formData);if(response.status===200){setMessage(response.message);setTimeout(()=>{setMessage('');navigate('/admin/products');},3000);}}catch(error){var _error$response,_error$response$data;setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'unable to update product');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"product-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Produc\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageChange}),imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:name}),/*#__PURE__*/_jsxs(\"select\",{value:categoryId,onChange:e=>setCategoryId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},cat.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Price\",value:price,onChange:e=>setPrice(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update\"})]});};export default EditProductPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","ApiService","jsx","_jsx","jsxs","_jsxs","EditProductPage","productId","image","setImage","categories","setCategories","categoryId","setCategoryId","name","setName","description","setDescription","message","setMessage","price","setPrice","imageUrl","setImageUrl","navigate","getAllCategory","then","res","categoryList","getProductById","response","product","handleImageChange","e","target","files","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","append","updateProduct","status","setTimeout","error","_error$response","_error$response$data","data","onSubmit","className","children","type","onChange","src","alt","value","map","cat","id","placeholder"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/admin/EditProductPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport '../../style/addProduct.css'\r\nimport ApiService from \"../../service/ApiService\";\r\n\r\n\r\nconst EditProductPage = () => {\r\n    const {productId} = useParams();\r\n    const [image, setImage] = useState(null);\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryId, setCategoryId] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [imageUrl, setImageUrl] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(()=>{\r\n        ApiService.getAllCategory().then((res) => setCategories(res.categoryList));\r\n\r\n        if (productId) {\r\n            ApiService.getProductById(productId).then((response)=>{\r\n                setName(response.product.name);\r\n                setDescription(response.product.description);\r\n                setPrice(response.product.price);\r\n                setCategoryId(response.product.categoryId);\r\n                setImageUrl(response.product.imageUrl);\r\n            })\r\n        }\r\n    }, [productId]);\r\n\r\n    const handleImageChange = (e) =>{\r\n        setImage(e.target.files[0]);\r\n        setImageUrl(URL.createObjectURL(e.target.files[0]));\r\n    };\r\n\r\n    \r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const formData = new FormData();\r\n            if(image){\r\n                formData.append('image', image);\r\n            }\r\n            formData.append('productId', productId);\r\n            formData.append('categoryId', categoryId);\r\n            formData.append('name', name);\r\n            formData.append('description', description);\r\n            formData.append('price', price);\r\n\r\n            const response = await ApiService.updateProduct(formData);\r\n            if (response.status === 200) {\r\n                setMessage(response.message)\r\n                setTimeout(() => {\r\n                    setMessage('')\r\n                    navigate('/admin/products')\r\n                }, 3000);\r\n            }\r\n\r\n        } catch (error) {\r\n            setMessage(error.response?.data?.message || error.message || 'unable to update product')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <form onSubmit={handleSubmit} className=\"product-form\">\r\n            <h2>Edit Produc</h2>\r\n            {message && <div className=\"message\">{message}</div>}\r\n            <input type=\"file\" onChange={handleImageChange}/>\r\n            {imageUrl && <img src={imageUrl} alt={name} />}\r\n            <select value={categoryId} onChange={(e)=> setCategoryId(e.target.value)}>\r\n                <option value=\"\">Select Category</option>\r\n                {categories.map((cat)=>(\r\n                    <option value={cat.id} key={cat.id}>{cat.name}</option>\r\n                ))}\r\n            </select>\r\n\r\n            <input type=\"text\" \r\n                placeholder=\"Product name\"\r\n                value={name}\r\n                onChange={(e)=> setName(e.target.value)} />\r\n\r\n                <textarea \r\n                placeholder=\"Description\"\r\n                value={description}\r\n                onChange={(e)=> setDescription(e.target.value)}/>\r\n\r\n                <input type=\"number\" \r\n                placeholder=\"Price\"\r\n                value={price}\r\n                onChange={(e)=> setPrice(e.target.value)} />\r\n\r\n                <button type=\"submit\">Update</button>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default EditProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}