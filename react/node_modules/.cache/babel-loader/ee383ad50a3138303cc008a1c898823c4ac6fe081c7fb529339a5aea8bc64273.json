{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import'../../style/adminProduct.css';import Pagination from\"../common/Pagination\";import ApiService from\"../../service/ApiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProductPage=()=>{const navigate=useNavigate();const[products,setProducts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const[error,setError]=useState(null);const itemsPerPage=10;const fetchProducts=async()=>{try{const response=await ApiService.getAllProducts();const productList=response.productList||[];setTotalPages(Math.ceil(productList.length/itemsPerPage));setProducts(productList.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage));}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'unable to fetch products');}};useEffect(()=>{fetchProducts();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentPage]);const handleEdit=async id=>{navigate(\"/admin/edit-product/\".concat(id));};const handleDelete=async id=>{const confirmed=window.confirm(\"Are your sure you want to delete this product? \");if(confirmed){try{await ApiService.deleteProduct(id);fetchProducts();}catch(error){var _error$response2,_error$response2$data;setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||'unable to delete product');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"admin-product-list\",children:error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{className:\"product-btn\",onClick:()=>{navigate('/admin/add-product');},children:\"Add product\"}),/*#__PURE__*/_jsx(\"ul\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:product.name}),/*#__PURE__*/_jsx(\"button\",{className:\"product-btn\",onClick:()=>handleEdit(product.id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"product-btn-delete\",onClick:()=>handleDelete(product.id),children:\"Delete\"})]},product.id))}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:page=>setCurrentPage(page)})]})});};export default AdminProductPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Pagination","ApiService","jsx","_jsx","jsxs","_jsxs","AdminProductPage","navigate","products","setProducts","currentPage","setCurrentPage","totalPages","setTotalPages","error","setError","itemsPerPage","fetchProducts","response","getAllProducts","productList","Math","ceil","length","slice","_error$response","_error$response$data","data","message","handleEdit","id","concat","handleDelete","confirmed","window","confirm","deleteProduct","_error$response2","_error$response2$data","className","children","onClick","map","product","name","onPageChange","page"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/admin/AdminProductPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../../style/adminProduct.css'\r\nimport Pagination from \"../common/Pagination\";\r\nimport ApiService from \"../../service/ApiService\";\r\n\r\nconst AdminProductPage = () => {\r\n    const navigate = useNavigate();\r\n    const [products, setProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [error, setError] = useState(null);\r\n    const itemsPerPage = 10;\r\n\r\n\r\n    const fetchProducts = async() => {\r\n        try {\r\n            const response = await ApiService.getAllProducts();\r\n            const productList = response.productList || [];\r\n            setTotalPages(Math.ceil(productList.length/itemsPerPage));\r\n            setProducts(productList.slice((currentPage -1) * itemsPerPage, currentPage * itemsPerPage));\r\n        } catch (error) {\r\n            setError(error.response?.data?.message || error.message || 'unable to fetch products')\r\n            \r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetchProducts();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [currentPage]);\r\n\r\n    const handleEdit = async (id) => {\r\n        navigate(`/admin/edit-product/${id}`)\r\n    }\r\n    const handleDelete = async(id) => {\r\n        const confirmed = window.confirm(\"Are your sure you want to delete this product? \")\r\n        if(confirmed){\r\n            try {\r\n                await ApiService.deleteProduct(id);\r\n                fetchProducts();\r\n            } catch (error) {\r\n                setError(error.response?.data?.message || error.message || 'unable to delete product')\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"admin-product-list\">\r\n            {error ? (\r\n                <p className=\"error-message\">{error}</p>\r\n            ): (\r\n                <div>\r\n                    <h2>Products</h2>\r\n                    <button className=\"product-btn\" onClick={()=> {navigate('/admin/add-product'); }}>Add product</button>\r\n                    <ul>\r\n                        {products.map((product)=>(\r\n                            <li key={product.id}>\r\n                                <span>{product.name}</span>\r\n                                <button className=\"product-btn\" onClick={()=> handleEdit(product.id)}>Edit</button>\r\n                                <button className=\"product-btn-delete\" onClick={()=> handleDelete(product.id)}>Delete</button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    <Pagination\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={(page)=> setCurrentPage(page)}/>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nexport default AdminProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}