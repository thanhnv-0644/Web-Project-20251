{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import ApiService from\"../../service/ApiService\";import ProductList from\"../common/ProductList\";import Pagination from\"../common/Pagination\";import CategorySidebar from\"../common/CategorySidebar\";import'../../style/home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryProductsPage=()=>{const{categoryId}=useParams();const[products,setProducts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const[error,setError]=useState(null);const itemsPerPage=8;useEffect(()=>{fetchProducts();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[categoryId,currentPage]);const fetchProducts=async()=>{try{const response=await ApiService.getAllProductsByCategoryId(categoryId);const allProducts=response.productList||[];setTotalPages(Math.ceil(allProducts.length/itemsPerPage));setProducts(allProducts.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage));}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'unable to fetch products by categoty id');}};return/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(CategorySidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"home-content\",children:error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ProductList,{products:products}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:page=>setCurrentPage(page)})]})})]})});};export default CategoryProductsPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","ApiService","ProductList","Pagination","CategorySidebar","jsx","_jsx","jsxs","_jsxs","CategoryProductsPage","categoryId","products","setProducts","currentPage","setCurrentPage","totalPages","setTotalPages","error","setError","itemsPerPage","fetchProducts","response","getAllProductsByCategoryId","allProducts","productList","Math","ceil","length","slice","_error$response","_error$response$data","data","message","className","children","onPageChange","page"],"sources":["D:/2025.1/CNW/Web-Project-20251/react/src/component/pages/CategoryProductsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ApiService from \"../../service/ApiService\";\r\nimport ProductList from \"../common/ProductList\";\r\nimport Pagination from \"../common/Pagination\";\r\nimport CategorySidebar from \"../common/CategorySidebar\";\r\nimport '../../style/home.css'\r\n\r\n\r\nconst CategoryProductsPage = () => {\r\n\r\n    const { categoryId } = useParams();\r\n    const [products, setProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [error, setError] = useState(null);\r\n    const itemsPerPage = 8;\r\n\r\n\r\n    useEffect(() => {\r\n        fetchProducts();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [categoryId, currentPage]);\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n\r\n            const response = await ApiService.getAllProductsByCategoryId(categoryId);\r\n            const allProducts = response.productList || [];\r\n            setTotalPages(Math.ceil(allProducts.length / itemsPerPage));\r\n            setProducts(allProducts.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage));\r\n        } catch (error) {\r\n            setError(error.response?.data?.message || error.message || 'unable to fetch products by categoty id')\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        <div className=\"home\">\r\n            <div className=\"home-container\">\r\n                <CategorySidebar />\r\n                <div className=\"home-content\">\r\n                    {error ? (\r\n                        <p className=\"error-message\">{error}</p>\r\n                    ):(\r\n                        <div>\r\n                            <ProductList products={products}/>\r\n                            <Pagination  currentPage={currentPage}\r\n                            totalPages={totalPages}\r\n                            onPageChange={(page)=> setCurrentPage(page)}/>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default CategoryProductsPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAC/C,MAAO,CAAAC,UAAU,KAAM,sBAAsB,CAC7C,MAAO,CAAAC,eAAe,KAAM,2BAA2B,CACvD,MAAO,sBAAsB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG7B,KAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CAE/B,KAAM,CAAEC,UAAW,CAAC,CAAGV,SAAS,CAAC,CAAC,CAClC,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAqB,YAAY,CAAG,CAAC,CAGtBpB,SAAS,CAAC,IAAM,CACZqB,aAAa,CAAC,CAAC,CACf;AACJ,CAAC,CAAE,CAACV,UAAU,CAAEG,WAAW,CAAC,CAAC,CAE7B,KAAM,CAAAO,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAEA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,UAAU,CAACqB,0BAA0B,CAACZ,UAAU,CAAC,CACxE,KAAM,CAAAa,WAAW,CAAGF,QAAQ,CAACG,WAAW,EAAI,EAAE,CAC9CR,aAAa,CAACS,IAAI,CAACC,IAAI,CAACH,WAAW,CAACI,MAAM,CAAGR,YAAY,CAAC,CAAC,CAC3DP,WAAW,CAACW,WAAW,CAACK,KAAK,CAAC,CAACf,WAAW,CAAG,CAAC,EAAIM,YAAY,CAAEN,WAAW,CAAGM,YAAY,CAAC,CAAC,CAChG,CAAE,MAAOF,KAAK,CAAE,KAAAY,eAAA,CAAAC,oBAAA,CACZZ,QAAQ,CAAC,EAAAW,eAAA,CAAAZ,KAAK,CAACI,QAAQ,UAAAQ,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBE,IAAI,UAAAD,oBAAA,iBAApBA,oBAAA,CAAsBE,OAAO,GAAIf,KAAK,CAACe,OAAO,EAAI,yCAAyC,CAAC,CACzG,CACJ,CAAC,CAGD,mBACI1B,IAAA,QAAK2B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACjB1B,KAAA,QAAKyB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3B5B,IAAA,CAACF,eAAe,GAAE,CAAC,cACnBE,IAAA,QAAK2B,SAAS,CAAC,cAAc,CAAAC,QAAA,CACxBjB,KAAK,cACFX,IAAA,MAAG2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEjB,KAAK,CAAI,CAAC,cAExCT,KAAA,QAAA0B,QAAA,eACI5B,IAAA,CAACJ,WAAW,EAACS,QAAQ,CAAEA,QAAS,CAAC,CAAC,cAClCL,IAAA,CAACH,UAAU,EAAEU,WAAW,CAAEA,WAAY,CACtCE,UAAU,CAAEA,UAAW,CACvBoB,YAAY,CAAGC,IAAI,EAAItB,cAAc,CAACsB,IAAI,CAAE,CAAC,CAAC,EAC7C,CACR,CACA,CAAC,EACL,CAAC,CACL,CAAC,CAEd,CAAC,CACD,cAAe,CAAA3B,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}